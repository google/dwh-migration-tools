/*
 * This file was generated by the Gradle 'init' task.
 */
buildscript {
    dependencies {
        classpath libs.asm.commons
    }
}

plugins {
    id 'dbsync.java-library-conventions'
    id 'dbsync.java-application-conventions'
    alias libs.plugins.shadow
}

dependencies {
    dependencies {
        implementation project(':dbsync:common')
        implementation project(':dbsync:storage-aws')
        implementation project(':dbsync:storage-gcs')
        implementation libs.jopt.simple
        implementation libs.jdiagnostics
        implementation libs.commons.lang3
        implementation libs.google.cloud.run
    }
}

application {
    mainClass = 'com.google.edwmigration.dbsync.server.ServerMain'
}

shadowJar {
    relocate('it.unimi.dsi.fastutil', 'dbsync.shadow.fastutil') {
        include 'it.unimi.dsi.fastutil.ints.*'
    }
    minimize()
    // exclude 'it/unimi/dsi/fastutil/**'
    // exclude 'it.unimi.dsi.fastutil.*'
}
