/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    alias libs.plugins.shadow
    id 'dbsync.java-application-conventions'
}

configurations {
    serverClasspath {
        canBeConsumed = false
    }
}

dependencies {
    implementation project(':dbsync:common')
    implementation project(':dbsync:server')
    implementation project(':dbsync:storage-aws')
    implementation project(':dbsync:storage-gcs')
    implementation libs.jopt.simple
    implementation libs.jdiagnostics
    implementation libs.commons.lang3
    implementation libs.google.cloud.run
    serverClasspath project(path: ':dbsync:server', configuration: 'shadow')
}

application {
    mainClass = 'com.google.edwmigration.dbsync.client.CloudRunMain'
}

distributions {
    main {
        contents {
            from(configurations.serverClasspath) {
                into 'lib/server'
            }
        }
    }
}